import{nav,openhabHost,checkLogin}from"./app.js";function prepare(e,t){return e.value=openhabHost(),document.getElementById("crossorigin").classList.add("d-none"),t.querySelectorAll(".credentials").forEach(e=>e.classList.add("d-none")),t.querySelectorAll(".hostonly").forEach(e=>e.classList.remove("d-none")),checkLogin().catch(o=>{throw"404"==o.message?e.classList.add("text-danger"):"crossorigin"==o.message?document.getElementById("crossorigin").classList.remove("d-none"):(console.log(o),t.querySelectorAll(".credentials").forEach(e=>e.classList.remove("d-none")),t.querySelectorAll(".hostonly").forEach(e=>e.classList.add("d-none"))),o})}function prepareLoginForm(){const e=document.getElementById("inputHost"),t=document.getElementById("loginform");e&&t&&(t.addEventListener("submit",o=>{o.preventDefault(),localStorage.setItem("host",new FormData(o.target).get("host")),prepare(e,t).then(()=>nav.go("index.html")).catch(()=>{})}),prepare(e,t).catch(()=>{}))}document.addEventListener("DOMContentLoaded",()=>prepareLoginForm()),["interactive","complete"].includes(document.readyState)&&prepareLoginForm();