import*as cronstrue from"./cronstrue.js";const demoItems=[{editable:!0,label:"My wakeup timer",tags:["Lighting"],totalRuns:5,remainingRuns:null,cronExpression:"0 7 ? * MON-FRI",type:"cron",enabled:!0,UID:"timer:3edb5737",lastrun:1546950225013},{editable:!0,label:"Garden watering",tags:["Lighting"],totalRuns:17,remainingRuns:null,cronExpression:"0 30 10-13 ? * WED,FRI",type:"cron",enabled:!0,UID:"timer:4263ds53",lastrun:1546950225013},{editable:!0,label:"An absolut timer",tags:["Lighting"],totalRuns:0,remainingRuns:1,datetime:"2008-09-15T15:53:00",type:"fixed",enabled:!0,UID:"timer:4263ds53",lastrun:1546950225013}],schema={uri:"http://openhab.org/schema/timer-schema.json",fileMatch:["http://openhab.org/schema/timer-schema.json"],schema:{type:"array",items:{$ref:"#/definitions/item"},definitions:{item:{type:"object",description:"An openHAB thing",required:["UID","type","label"],properties:{link:{type:"string",description:"Internal URI information for openHAB REST clients"},editable:{type:"boolean",description:"Items defined via old .item files are not editable"},UID:{type:"string",description:"A unique ID for this thing",minLength:2},label:{type:"string",description:"A friendly name",minLength:2},tags:{type:"array",uniqueItems:!0,description:"Tags of this item"},type:{enum:["fixed","cron"],description:"A fixed timer runs once at the given date and time. A cron timer is reoccuring."},cronExpression:{type:"string",description:"A cron expression for reoccuring events",minLength:2},datetime:{type:"string",description:"A date/time expressed as ISO 8601 Notation",minLength:2}}}}}},TimerMixin={methods:{timerStatusinfo:function(e){return e.lastrun+5e3>Date.now()?"Running":"Idle"},timerStatusBadge:function(e){return e.lastrun+5e3>Date.now()?"badge badge-success":"badge badge-light"},timerDescription:function(e){if("cron"!=e.type)return"fixed"==e.type?(new Date).toString():"Unsupported timer type";try{return cronstrue.toString(e.cronExpression,{throwExceptionOnParseError:!0,use24HourTimeFormat:!0})}catch(e){return"Cron expression parse error: "+e}}}};window.loadTimers=function(e){calledOnce=!0,e.start([TimerMixin],"http://openhab.org/schema/timer-schema.json",schema,["link","editable","remainingRuns","totalRuns","lastrun"]),e.items=demoItems};var calledOnce=!1,el=document.getElementById("timersapp");el&&!calledOnce&&loadTimers(el);